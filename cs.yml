    # Generated by Terraform.
---

# Установка mysql и копирование конфиг файла для slave
- hosts: slave_db
  gather_facts: false
  roles:
    - { role: install_mysql,
              mysql_repl_role: slavedb }
# Установка mysql и копирование конфиг файла для master
- hosts: master_db
  gather_facts: false
  roles:
    - { role: install_mysql,
              mysql_repl_role: master }
#Настройка репликации mysql master
- hosts: master_db
  gather_facts: false
  vars:
    ansible_python_interpreter: /usr/bin/python3
  roles:
    - { role: ms,
              mysql_repl_role: master }
# Настройка репликайии mysql slave              
- hosts: slave_db
  vars:
    ansible_python_interpreter: /usr/bin/python3
  gather_facts: false
  roles:
    - { role: ms,
              mysql_repl_role: slavedb }
# Установка Документ сервера
- hosts: ds
  gather_facts: false
  roles:
    - ds
# Установка Корпоративного сервера
- hosts: cs
  gather_facts: false
  roles:
    - cs
# Настройка Документ сервера для Корпоративного сервера
- hosts: ds
  gather_facts: false
  roles:
    - { role: config_cs_ds,
        mysql_repl_role: ds }
# Насйтрока Корпоративного сервера для вынесения Документ сервера
- hosts: cs
  gather_facts: false
  roles:
    - { role: config_cs_ds,
        mysql_repl_role: cs  }
# Настйрока Корпоративного сервера для выноса mysql
- hosts: cs
  gather_facts: false
  roles:
    - { role: config_cs_mysql  }



